<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">
    Attendance System - Database Schema
  </text>

  <!-- Module 1: Attendance (Blue) -->
  <g id="module1">
    <!-- employees table -->
    <rect x="50" y="80" width="200" height="140" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="150" y="105" font-weight="bold" text-anchor="middle" fill="#1976d2">employees</text>
    <line x1="50" y1="115" x2="250" y2="115" stroke="#1976d2" stroke-width="1"/>
    <text x="60" y="135" font-size="12" fill="#333">id (PK)</text>
    <text x="60" y="155" font-size="12" fill="#333">employee_id</text>
    <text x="60" y="175" font-size="12" fill="#333">name, username</text>
    <text x="60" y="195" font-size="12" fill="#333">password, active</text>
    <text x="60" y="210" font-size="11" fill="#666">Module 1</text>

    <!-- attendance table -->
    <rect x="350" y="80" width="200" height="140" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="450" y="105" font-weight="bold" text-anchor="middle" fill="#1976d2">attendance</text>
    <line x1="350" y1="115" x2="550" y2="115" stroke="#1976d2" stroke-width="1"/>
    <text x="360" y="135" font-size="12" fill="#333">id (PK)</text>
    <text x="360" y="155" font-size="12" fill="#333">employee_id (FK)</text>
    <text x="360" y="175" font-size="12" fill="#333">clock_in, clock_out</text>
    <text x="360" y="195" font-size="12" fill="#333">hours_worked, notes</text>
    <text x="360" y="210" font-size="11" fill="#666">Module 1</text>

    <!-- employee_schedules table -->
    <rect x="650" y="80" width="200" height="140" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="750" y="105" font-weight="bold" text-anchor="middle" fill="#1976d2">employee_schedules</text>
    <line x1="650" y1="115" x2="850" y2="115" stroke="#1976d2" stroke-width="1"/>
    <text x="660" y="135" font-size="12" fill="#333">id (PK)</text>
    <text x="660" y="155" font-size="12" fill="#333">employee_id (FK)</text>
    <text x="660" y="175" font-size="12" fill="#333">start_time, end_time</text>
    <text x="660" y="195" font-size="12" fill="#333">expected_hours</text>
    <text x="660" y="210" font-size="11" fill="#666">Module 1</text>
  </g>

  <!-- Module 2: Work Hours Monitoring (Green) -->
  <g id="module2">
    <!-- work_hours_summary table -->
    <rect x="50" y="320" width="220" height="160" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="160" y="345" font-weight="bold" text-anchor="middle" fill="#388e3c">work_hours_summary</text>
    <line x1="50" y1="355" x2="270" y2="355" stroke="#388e3c" stroke-width="1"/>
    <text x="60" y="375" font-size="12" fill="#333">id (PK)</text>
    <text x="60" y="395" font-size="12" fill="#333">employee_id (FK)</text>
    <text x="60" y="415" font-size="12" fill="#333">date, period_type</text>
    <text x="60" y="435" font-size="12" fill="#333">total_hours</text>
    <text x="60" y="455" font-size="12" fill="#333">late_minutes, undertime</text>
    <text x="60" y="470" font-size="12" fill="#333">overtime_hours</text>
    <text x="60" y="485" font-size="11" fill="#666">Module 2</text>
  </g>

  <!-- Module 3: Payroll (Orange) -->
  <g id="module3">
    <!-- payroll_records table -->
    <rect x="350" y="320" width="220" height="160" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="460" y="345" font-weight="bold" text-anchor="middle" fill="#f57c00">payroll_records</text>
    <line x1="350" y1="355" x2="570" y2="355" stroke="#f57c00" stroke-width="1"/>
    <text x="360" y="375" font-size="12" fill="#333">id (PK)</text>
    <text x="360" y="395" font-size="12" fill="#333">employee_id (FK)</text>
    <text x="360" y="415" font-size="12" fill="#333">period_start, period_end</text>
    <text x="360" y="435" font-size="12" fill="#333">total_hours, overtime</text>
    <text x="360" y="455" font-size="12" fill="#333">undertime, status</text>
    <text x="360" y="475" font-size="11" fill="#666">Module 3</text>
    <text x="360" y="490" font-size="11" fill="#666">(Payroll Summary)</text>
  </g>

  <!-- attendance_errors table -->
  <g id="errors">
    <rect x="650" y="320" width="220" height="160" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="760" y="345" font-weight="bold" text-anchor="middle" fill="#f57c00">attendance_errors</text>
    <line x1="650" y1="355" x2="870" y2="355" stroke="#f57c00" stroke-width="1"/>
    <text x="660" y="375" font-size="12" fill="#333">id (PK)</text>
    <text x="660" y="395" font-size="12" fill="#333">employee_id (FK)</text>
    <text x="660" y="415" font-size="12" fill="#333">error_type</text>
    <text x="660" y="435" font-size="12" fill="#333">attendance_id (FK)</text>
    <text x="660" y="455" font-size="12" fill="#333">date, description</text>
    <text x="660" y="475" font-size="12" fill="#333">status</text>
    <text x="660" y="490" font-size="11" fill="#666">Module 3</text>
  </g>

  <!-- Relationships/Arrows -->
  <!-- employees to attendance -->
  <line x1="250" y1="150" x2="350" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="295" y="140" font-size="11" fill="#666">1:N</text>

  <!-- employees to employee_schedules -->
  <line x1="250" y1="130" x2="650" y2="130" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="440" y="120" font-size="11" fill="#666">1:1</text>

  <!-- attendance to work_hours_summary -->
  <line x1="450" y1="220" x2="160" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="300" y="270" font-size="11" fill="#666">calculates</text>

  <!-- employees to work_hours_summary -->
  <line x1="150" y1="220" x2="150" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="160" y="270" font-size="11" fill="#666">1:N</text>

  <!-- work_hours_summary to payroll_records -->
  <line x1="270" y1="400" x2="350" y2="400" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="305" y="390" font-size="11" fill="#666">feeds</text>

  <!-- employees to payroll_records -->
  <line x1="250" y1="200" x2="460" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="340" y="260" font-size="11" fill="#666">1:N</text>

  <!-- attendance to attendance_errors -->
  <line x1="550" y1="200" x2="760" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="650" y="260" font-size="11" fill="#666">1:N</text>

  <!-- employees to attendance_errors -->
  <line x1="250" y1="220" x2="760" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="490" y="270" font-size="11" fill="#666">1:N</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="600" width="1100" height="180" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="5"/>
    
    <text x="70" y="625" font-weight="bold" fill="#333">Legend:</text>
    
    <rect x="70" y="635" width="15" height="15" fill="#e3f2fd" stroke="#1976d2" stroke-width="1"/>
    <text x="95" y="647" font-size="12" fill="#333">Module 1: Attendance Logging - Employee Check-In/Out, Late/Undertime/Overtime Detection, QR Code</text>
    
    <rect x="70" y="665" width="15" height="15" fill="#e8f5e9" stroke="#388e3c" stroke-width="1"/>
    <text x="95" y="677" font-size="12" fill="#333">Module 2: Work Hours Monitoring - Daily/Weekly/Monthly Hours Calculation, Shift &amp; Schedule Comparison</text>
    
    <rect x="70" y="695" width="15" height="15" fill="#fff3e0" stroke="#f57c00" stroke-width="1"/>
    <text x="95" y="707" font-size="12" fill="#333">Module 3: Payroll Summary &amp; Reporting - Attendance Summary, Payroll Generation, Error &amp; Missing Log Notifications</text>
    
    <text x="70" y="745" font-size="11" fill="#666">PK = Primary Key | FK = Foreign Key | 1:N = One-to-Many Relationship | 1:1 = One-to-One Relationship</text>
  </g>

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
    <!-- Crow's foot for many side -->
    <marker id="crowfoot" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polyline points="0 0, 10 3, 0 6" fill="none" stroke="#666" stroke-width="1"/>
      <line x1="0" y1="0" x2="-3" y2="-3" stroke="#666" stroke-width="1"/>
      <line x1="0" y1="6" x2="-3" y2="9" stroke="#666" stroke-width="1"/>
    </marker>
    <!-- Circle for one side -->
    <marker id="circle" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <circle cx="5" cy="5" r="3" fill="none" stroke="#666" stroke-width="1"/>
    </marker>
  </defs>

  <!-- Relationship Type Labels -->
  <g id="relationship-labels">
    <!-- employees to attendance: 1:N -->
    <text x="280" y="135" font-size="10" font-weight="bold" fill="#d32f2f" background="#fff">1:N</text>
    
    <!-- employees to employee_schedules: 1:1 -->
    <text x="440" y="110" font-size="10" font-weight="bold" fill="#d32f2f">1:1</text>
    
    <!-- employees to work_hours_summary: 1:N -->
    <text x="140" y="270" font-size="10" font-weight="bold" fill="#d32f2f">1:N</text>
    
    <!-- work_hours_summary to payroll_records: 1:N -->
    <text x="305" y="385" font-size="10" font-weight="bold" fill="#d32f2f">1:N</text>
    
    <!-- employees to payroll_records: 1:N -->
    <text x="340" y="255" font-size="10" font-weight="bold" fill="#d32f2f">1:N</text>
    
    <!-- attendance to attendance_errors: 1:N -->
    <text x="650" y="255" font-size="10" font-weight="bold" fill="#d32f2f">1:N</text>
    
    <!-- employees to attendance_errors: 1:N -->
    <text x="490" y="265" font-size="10" font-weight="bold" fill="#d32f2f">1:N</text>
  </g>

  <!-- Relationship Summary Box -->
  <g id="relationship-summary">
    <rect x="50" y="550" width="1100" height="40" fill="#fff9c4" stroke="#f57f17" stroke-width="1" rx="3"/>
    <text x="70" y="570" font-size="12" font-weight="bold" fill="#333">Relationship Summary:</text>
    <text x="350" y="570" font-size="11" fill="#333">• 1:N (One-to-Many): One employee has many attendance records, schedules, payroll records, and error logs</text>
    <text x="70" y="585" font-size="11" fill="#333">• 1:1 (One-to-One): One employee has one schedule</text>
  </g>
</svg>